{% extends 'layout.html.twig' %}
{% set pagetitle = 'metagist.org' %}

{% block content %}

    <div class="hero-unit">
        <h1>metagist.org</h1>
        <p>What you need to know about PHP packages.</p>
        <form action="/search" method="post" class="form-search">
            <input type="text" class="input-medium search-query" name="query">
            <button type="submit" class="btn">Search a package</button>
        </form>
    </div>

    <div class="row-fluid">
        
        <div class="span4">
            <h2>Latest Updates</h2>
            <ul class="unstyled">
                {% for metainfo in latest %}
                    <li class="{{ metainfo.getCategory ~ '_' ~ metainfo.getGroup }}">
                        <a href="/package/{{ metainfo.getPackage.getIdentifier|e }}">{{ metainfo.getPackage.getIdentifier|e }}</a>
                        <strong>{{ icon(metainfo.getCategory ~ '_' ~ metainfo.getGroup) }} {{ (metainfo.getCategory ~ '_' ~ metainfo.getGroup)|trans }}:</strong>  {{ metainfo.getValue |e }}
                    </li>
                {% endfor %}
            </ul>
        </div>
        
        <div class="span4">
            <h2>Best rated</h2>
            <ul class="unstyled">
                {% for rating in best %}
                    <li>
                        {% for i in 1..rating.rating %}<i class="icon icon-star"></i>{% endfor %}
                        <a href="/package/{{ rating.getPackage.getIdentifier|e }}">{{ rating.getPackage.getIdentifier|e }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
        
        <div class="span4">
            <h2>{{ "Featured Packages" | trans }}</h2>
            <ul class="unstyled">
            {% for metainfo in featured %}
                <li class="{{ metainfo.getCategory ~ '_' ~ metainfo.getGroup }}">
                    <h3>
                        <a href="/package/{{ metainfo.getPackage.getIdentifier|e }}">{{ metainfo.getPackage.getIdentifier|e }}</a>
                    </h3>
                    
                    <p>{{ metainfo.value|e }}</p>
                </li>
            {% endfor %}
            </ul>
        </div>
    </div>
    
{% endblock %}
